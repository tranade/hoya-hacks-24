<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>PlatePal</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      .cardFeed {
        transition: 0.3s;
        width: 1100px;
        height: 135px;  
        margin: 160px 80px 0px 80px;
        border-radius: 24px;
        border: 1.5px rgb(237, 229, 229) solid;
        background-color: #f9faf5;
      }

      .img {
        border-radius: 24px 0px 0px 24px;
        width: 175px;
        height: 100%;
      }

      .container {
        position: relative;
        left: 170px;
        top: -135px;
        padding: 15px 15px 30px 30px;
        font-family: 'Inter';
        font-weight: 600;
        font-size: 16px;
      }

      .request {
        position: relative;
        left: 950px;
        width: 35px;
        height: 35px;
        border-radius: 50px;
        border: 0px;
        color: green;
        font-size: 25px;
      }

      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
        z-index: 1001; /* Higher z-index than .navbar */
      }

      .form-container {
        background: #fff;
        padding: 20px;
        border-radius: 10px;
        width: 300px;
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="navbar">
        <div class="logo"><a href="./index.html">PlatePal</a></div>
        <ul class="menu"> 
          <li><a href="./index.html">Home</a></li>
          <li><a class="active" href="./feed.html">Feed</a></li>
          <li><a href="./matches.html">Matches</a></li>
          <li><a href="./inventory.html">My Inventory</a></li>
        </ul>
      </div>
    </nav>

    <div class="button">
      <a href="/"><i class="fas fa-arrow-up"></i></a>
    </div>

    <div> 
      <h1 class="Header"> Feed <button class="request" onclick="openForm()"> + </button></h1>
      <p class="divider">________________________________________________________________________________________________________________________________________________________________________</p>
    </div>

    <div class="cardFeed">
      <img src="assets/tomato.png" class="img"> 
      <div class="container">
        <h3>1lb Heirloom tomato</h3> 
        <p style="position: relative; top: 3px;">Expiring by 27th Jan</p> 
        <p style="position: relative; top: 3px;">Bought on 23rd Jan</p> 
      </div>
    </div>

    <div class="cardFeed" style="margin: 30px 80px 0px 80px;">
      <img src="assets/ginger.png" class="img"> 
      <div class="container">
        <h3>2lb Organic ginger</h3> 
        <p style="position: relative; top: 3px;">Expiring by 30th Jan</p> 
        <p style="position: relative; top: 3px;">Bought on 23rd Jan</p> 
      </div>
    </div>

    <div class="cardFeed" style="margin: 30px 80px 0px 80px;">
      <img src="assets/tomato.png" class="img"> 
      <div class="container">
        <h3>1lb Heirloom tomato</h3> 
        <p style="position: relative; top: 3px;">Expiring by 27th Jan</p> 
        <p style="position: relative; top: 3px;">Bought on 23rd Jan</p> 
      </div>
    </div>

    <div class="cardFeed" style="margin: 30px 80px 0px 80px;">
      <img src="assets/broccoli.jpg" class="img"> 
      <div class="container">
        <h3>1lb Fresh Broccoli</h3> 
        <p style="position: relative; top: 3px;">Expiring by 31sy Jan</p> 
        <p style="position: relative; top: 3px;">Bought on 26st Jan</p> 
      </div>
    </div>

    <!-- Overlay with Form -->
    <div class="overlay" id="overlay">
      <div class="form-container">
        <label for="foodName">Food Name:</label>
        <input type="text" id="foodName" name="foodName"><br>

        <label for="foodName">Quantity (lb):</label>
        <input type="text" id="quant" name="quant"><br>

        <label for="expirationDate">Expiration Date:</label>
        <input type="date" id="expirationDate" name="expirationDate"><br>

        <label for="purchaseDate">Purchase Date:</label>
        <input type="date" id="purchaseDate" name="purchaseDate"><br>

        <!-- Add other form fields as needed -->

        <button onclick="submitForm()">Submit</button>
        <button onclick="closeForm()">Close</button>
      </div>
    </div>

    <script>
      // Array to store submitted items
      var feedItems = [];

      function openForm() {
        document.getElementById("overlay").style.display = "flex";
      }

      function closeForm() {
        document.getElementById("overlay").style.display = "none";
      }

      function submitForm() {
        var foodName = document.getElementById("foodName").value;
        var expirationDate = document.getElementById("expirationDate").value;

        // Validate form fields, you can add more validation as needed

        // Create a new feed item object
        var newItem = {
          foodName: foodName,
          quant: quant,
          expirationDate: expirationDate,
          purchaseDate: purchaseDate
          // Add other properties as needed
        };

        // Add the new item to the array
        feedItems.push(newItem);

        // Close the form overlay
        closeForm();

        // Display the new item in the feed
        displayNewItem(newItem);
      }

      function displayNewItem(item) {
        // Create a new cardFeed for the submitted item
        var newCardFeed = document.createElement("div");
        newCardFeed.className = "cardFeed";

        var imgElement = document.createElement("img");
        imgElement.src = "assets/default-image.png"; // You can replace this with the actual image source
        imgElement.className = "img";

        var containerElement = document.createElement("div");
        containerElement.className = "container";
        containerElement.innerHTML = "<h3>" + item.quant +  item.foodName + "</h3>" +
          "<p>Expiring by " + item.expirationDate + "</p>" +
          "<p>Bought on " + getCurrentDate() + "</p>";

        newCardFeed.appendChild(imgElement);
        newCardFeed.appendChild(containerElement);

        // Add the new cardFeed to the document
        document.body.appendChild(newCardFeed);
      }

      function getCurrentDate() {
        var today = new Date();
        var day = today.getDate();
        var month = today.getMonth() + 1; // January is 0
        var year = today.getFullYear();

        return year + "-" + (month < 10 ? "0" : "") + month + "-" + (day < 10 ? "0" : "") + day;
      }
    </script>
  </body>
</html>